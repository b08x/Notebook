{"parameters":{"model":"gpt-3.5-turbo-16k-0613","temperature":"0.8","top_p":"0.5","presence_penalty":"0.5","max_tokens":"2000","context_size":"2","initial_prompt":"Summarize the changes in the provided diff for a git commit message.\nUse past tense.\nDo not end a line with a period.\nSeparate subject from body with a blank line.\nLimit the subject line to 50 characters.\nUse the imperative mood in the subject line.\nTry to ascertain why each change as made.\nWrap the body at 72 characters.\nUse past tense language.","easy_submit":false,"auto_speech":false,"app_name":"CommitMSG","icon":"<i class='fas fa-comments'></i>","description":"Summarize Git Diffs for Git Commit Messages","initiate_from_assistant":false},"messages":[{"role":"user","text":"diff --git a/group_vars/workstation.yml b/group_vars/workstation.yml\nindex 14b3e84..734a457 100644\n--- a/group_vars/workstation.yml\n+++ b/group_vars/workstation.yml\n@@ -21,8 +21,8 @@ use_bluetooth: False\n use_remapper: True\n \n wm:\n-  terminal: \"terminator\"\n-  terminal_alt: \"uxterm\"\n+  terminal: \"kitty\"\n+  terminal_alt: \"alacritty\"\n   browser: \"google-chrome-stable\"\n \n backgrounds: /usr/share/backgrounds/syncopated\ndiff --git a/roles/audio/defaults/main.yml b/roles/audio/defaults/main.yml\nindex aca2d78..ff21501 100644\n--- a/roles/audio/defaults/main.yml\n+++ b/roles/audio/defaults/main.yml\n@@ -1,5 +1,7 @@\n ---\n \n+use_bluetooth: False\n+\n jack:\n   dps:\n     device: hw:0\ndiff --git a/roles/common/files/usr/local/bin/jack-load.sh b/roles/common/files/usr/local/bin/jack-load.sh\nindex 3ab76e1..8ea0829 100644\n--- a/roles/common/files/usr/local/bin/jack-load.sh\n+++ b/roles/common/files/usr/local/bin/jack-load.sh\n@@ -36,7 +36,7 @@ case $choice in\n     device=$(cat $INPUTS | gum choose | awk '{print $2}' | sed 's/://g')\n     echo \"give this device an alias(no spaces)\"\n     name=$(gum input|sed 's/ /_/g')\n-    echo \"${name}\" > $INPUTS\n+    echo \"${name}\" >> $INPUTS\n     loadInput $name $device\n     ;;\n   output)\n@@ -45,7 +45,7 @@ case $choice in\n     device=$(cat $OUTPUTS | gum choose | awk '{print $2}' | sed 's/://g')\n     echo \"give this device an alieas(no spaces)\"\n     name=$(gum input|sed 's/ /_/g')\n-    echo \"${name}\" > $OUTPUTS\n+    echo \"${name}\" >> $OUTPUTS\n     loadOutput $name $device\n     ;;\n   unload)\ndiff --git a/roles/common/tasks/grub.yml b/roles/common/tasks/grub.yml\nindex 2c63caa..aba0494 100644\n--- a/roles/common/tasks/grub.yml\n+++ b/roles/common/tasks/grub.yml\n@@ -18,20 +18,21 @@\n   register: default_grub\n \n - name: Remake grub if changes were made\n-  shell: \"{{ grub_mkconfig_command }}\"\n-  when: default_grub.changed and reboot is not defined\n+  ansible.builtin.command: \"{{ grub_mkconfig_command }}\"\n+  when:\n+    - default_grub.changed\n+    - reboot is not defined\n+\n   vars:\n     grub_mkconfig_command: >-\n-      {% if ansible_distribution == 'Debian' %}\n-      update-grub\n-      {% elif ansible_distribution == 'AlmaLinux' %}\n-      grub2-mkconfig -o /boot/efi/EFI/almalinux/grub.cfg\n-      grub2-mkconfig -o /boot/grub2/grub.cfg\n-      {% elif ansible_distribution == 'Archlinux' %}\n-      grub-mkconfig -o /boot/grub/grub.cfg\n-      {% else %}\n-      # Unsupported distribution\n-      {% endif %}\n+      {% set grub_command_map = {\n+        'Debian': 'update-grub',\n+        'AlmaLinux': 'grub2-mkconfig -o /boot/efi/EFI/almalinux/grub.cfg\\ngrub2-mkconfig -o /boot/grub2/grub.cfg',\n+        'Archlinux': 'grub-mkconfig -o /boot/grub/grub.cfg'\n+      } %}\n+\n+      {{ grub_command_map.get(ansible_distribution, '# Unsupported distribution') }}\n+\n \n # - block:\n #\ndiff --git a/roles/common/tasks/main.yml b/roles/common/tasks/main.yml\nindex 61c9a23..2bbae44 100644\n--- a/roles/common/tasks/main.yml\n+++ b/roles/common/tasks/main.yml\n@@ -44,7 +44,6 @@\n \n - import_tasks:\n     file: grub.yml\n-  when: ansible_distribution != 'AlmaLinux'\n   tags: ['grub']\n \n - import_tasks:\ndiff --git a/roles/common/templates/etc/default/grub.j2 b/roles/common/templates/etc/default/grub.j2\nindex d0792ae..778d95b 100644\n--- a/roles/common/templates/etc/default/grub.j2\n+++ b/roles/common/templates/etc/default/grub.j2\n@@ -1,5 +1,6 @@\n # GRUB boot loader configuration\n-{% if ansible_distribution == 'Archlinux' %}\n+{% if ansible_distribution == 'Archlinux' or ansible_distribution == 'AlmaLinux' %}\n+\n GRUB_DEFAULT=saved\n GRUB_TIMEOUT=5\n GRUB_DISTRIBUTOR=\"ArchLabs - Syncopated\"\ndiff --git a/roles/desktop/defaults/main.yml b/roles/desktop/defaults/main.yml\nindex 466bbb9..76f1539 100644\n--- a/roles/desktop/defaults/main.yml\n+++ b/roles/desktop/defaults/main.yml\n@@ -1,8 +1,8 @@\n ---\n \n wm:\n-  terminal: \"terminator\"\n-  terminal_alt: \"uxterm\"\n+  terminal: \"kitty\"\n+  terminal_alt: \"alacritty\"\n   browser: \"google-chrome-stable\"\n \n i3:\ndiff --git a/roles/desktop/templates/home/.config/i3/autostart.j2 b/roles/desktop/templates/home/.config/i3/autostart.j2\nindex 4152ab5..ea6757f 100644\n--- a/roles/desktop/templates/home/.config/i3/autostart.j2\n+++ b/roles/desktop/templates/home/.config/i3/autostart.j2\n@@ -12,7 +12,7 @@ $exec \"input-remapper-control --command autoload;sleep 1\"\n \n $exec_always \"reload-sxhkd.sh\"\n \n-$exec \"~/.local/bin/i3autolayout.py\"\n+$exec \"/usr/local/bin/i3autolayout.py\"\n \n $exec \"sleep 1\"\n \ndiff --git a/roles/desktop/templates/home/.config/i3/window_assignments.j2 b/roles/desktop/templates/home/.config/i3/window_assignments.j2\nindex a3648d0..16da382 100644\n--- a/roles/desktop/templates/home/.config/i3/window_assignments.j2\n+++ b/roles/desktop/templates/home/.config/i3/window_assignments.j2\n@@ -12,7 +12,8 @@ workspace {{ ws }}\n #----------------------------- Workspace Assignments -----------------------#\n #############################################################################\n \n-assign [class=\"^obs\"] $ws9\n+\n+\n \n #assign [class=\"Bipscript\\ IDE\"] $ws1\n assign [class=\"(?i)Sonic\\ Pi\"] $ws2\n@@ -25,8 +26,12 @@ assign [class=\"Jalv.select\"] $ws10\n assign [class=\"Mixxx\"] $ws6\n assign [class=\"Non-Mixer\"] $ws10\n \n+assign [class=\"(?i)obsidian\"] $ws6\n+\n assign [class=\"REAPER\" title=\"^Mixer\"] $ws7\n \n+assign [class=\"^obs\"] $ws9\n+\n assign [class=\"^FMIT$\"] $ws10\n \n assign [class=\"^Jnoisemeter$\"] $ws10\ndiff --git a/roles/ruby/tasks/main.yml b/roles/ruby/tasks/main.yml\nindex cb3e257..de2a737 100644\n--- a/roles/ruby/tasks/main.yml\n+++ b/roles/ruby/tasks/main.yml\n@@ -1,34 +1,35 @@\n ---\n \n-- name: install system ruby packages\n-  dnf:\n-    name: \"{{ item }}\"\n-    state: present\n-    update_cache: yes\n-  loop:\n-    - cmake\n-    - g++\n-    - git\n-    - libgit2-devel\n-    - openssl-devel\n-    - postgresql-devel\n-    - ruby-devel\n-    - rubygem-psych\n-    - rubygems\n-  when: ansible_distribution == 'AlmaLinux'\n-  tags: ['packages']\n+- block:\n+    - name: install system ruby packages\n+      dnf:\n+        name: \"{{ item }}\"\n+        state: present\n+        update_cache: yes\n+      loop:\n+        - cmake\n+        - g++\n+        - git\n+        - libgit2-devel\n+        - openssl-devel\n+        - postgresql-devel\n+        - ruby-devel\n+        - rubygem-psych\n+        - rubygems\n+      when: ansible_distribution == 'AlmaLinux'\n+\n+    - name: install system ruby packages\n+      pacman:\n+        name: \"{{ item }}\"\n+        state: present\n+        force: yes\n+        extra_args: --noconfirm\n+      loop:\n+        - openssl\n+        - postgresql-libs\n+        - ruby-psych\n+      when: ansible_distribution == 'Archlinux'\n \n-- name: install system ruby package\n-  pacman:\n-    name: \"{{ item }}\"\n-    state: present\n-    force: yes\n-    extra_args: --noconfirm\n-  loop:\n-    - openssl\n-    - postgresql-libs\n-    - ruby-psych\n-  when: ansible_distribution == 'Archlinux'\n   tags: ['packages']\n \n - block:\n@@ -39,6 +40,7 @@\n \n         dest: \"/etc/gemrc\"\n         owner: root\n+      when: ansible_distribution != 'Archlinux'\n \n     - name: gather list of installed gems\n       shell: \"gem list | awk '{ print $1 }'\"\ndiff --git a/roles/user/tasks/main.yml b/roles/user/tasks/main.yml\nindex 4899129..6901b65 100644\n--- a/roles/user/tasks/main.yml\n+++ b/roles/user/tasks/main.yml\n@@ -1,5 +1,29 @@\n ---\n \n+- name: Ensure home directories are created\n+  file:\n+    dest: \"{{ home_directory_default_location }}/{{ item.dest }}\"\n+    state: directory\n+    owner: \"{{ item.owner | default(home_directory_default_owner) }}\"\n+    group: \"{{ item.group | default(home_directory_default_group) }}\"\n+    mode: \"{{ item.mode | default(home_directory_default_mode) }}\"\n+    recurse: \"{{ item.recurse | default(home_directory_default_recurse) }}\"\n+  with_items: \"{{ home_directory_definitions }}\"\n+  tags: ['dirs']\n+\n+- name: Ensure home files are created\n+  copy:\n+    src: \"{{ item.src if 'src' in item else omit }}\"\n+    content: \"{{ item.content if 'content' in item else omit }}\"\n+    dest: \"{{ home_directory_default_location }}/{{ item.dest }}\"\n+    owner: \"{{ item.owner | default(home_file_default_owner) }}\"\n+    group: \"{{ item.group | default(home_file_default_group) }}\"\n+    mode: \"{{ item.mode | default(home_file_default_mode) }}\"\n+  with_items: \"{{ home_file_definitions }}\"\n+  loop_control:\n+    label: \"{{ item.dest }}\"\n+  tags: ['dirs']\n+\n - name: Set admin group name\n   set_fact:\n     admin_group: wheel\ndiff --git a/roles/user/vars/main.yml b/roles/user/vars/main.yml\nindex ed97d53..43d141a 100644\n--- a/roles/user/vars/main.yml\n+++ b/roles/user/vars/main.yml\n@@ -1 +1,123 @@\n ---\n+\n+# The default directory permission mode when creating directories using `home_directory_definitions`\n+home_directory_default_mode: '0750'\n+\n+# The default directory owner when creating directories using `home_directory_definitions`\n+home_directory_default_owner: \"{{ user.name }}\"\n+\n+# The default directory group when creating directories using `home_directory_definitions`\n+home_directory_default_group: \"{{ user.group }}\"\n+\n+home_directory_default_location: \"{{ user.home }}\"\n+\n+home_directory_default_recurse: False\n+\n+home_directory_definitions:\n+  - dest: \".config/Debauchee/\"\n+  - dest: \".config/Kvantum/\"\n+  - dest: \".config/Thunar/\"\n+  - dest: \".config/alacritty/\"\n+  - dest: \".config/dunst/\"\n+  - dest: \".config/fontconfig/\"\n+  - dest: \".config/gtk-3.0/\"\n+  - dest: \".config/gtk-4.0/\"\n+  - dest: \".config/htop/\"\n+  - dest: \".config/htop/\"\n+  - dest: \".config/i3/\"\n+  - dest: \".config/i3status-rust/themes/\"\n+  - dest: \".config/input-remapper-2/\"\n+  - dest: \".config/jgmenu/\"\n+  - dest: \".config/kitty/\"\n+  - dest: \".config/lnav/\"\n+  - dest: \".config/nitrogen/\"\n+  - dest: \".config/picom/\"\n+  - dest: \".config/pulse/\"\n+    mode: '0700'\n+  - dest: \".config/qt5ct/colors/\"\n+  - dest: \".config/qt6ct/colors/\"\n+  - dest: \".config/qutebrowser/\"\n+  - dest: \".config/rofi/colors/\"\n+  - dest: \".config/rofi/images/\"\n+  - dest: \".config/rofi/launchers/\"\n+  - dest: \".config/rofi/launchers/type-1/shared/\"\n+  - dest: \".config/rofi/launchers/type-2/shared\"\n+  - dest: \".config/rofi/launchers/type-3/shared/\"\n+  - dest: \".config/rofi/launchers/type-4/shared/\"\n+  - dest: \".config/rofi/launchers/type-5/shared\"\n+  - dest: \".config/rofi/launchers/type-6/shared\"\n+  - dest: \".config/rofi/launchers/type-7/shared\"\n+  - dest: \".config/rofi/powermenu\"\n+  - dest: \".config/rofi/powermenu/type-1/shared\"\n+  - dest: \".config/rofi/powermenu/type-2/shared\"\n+  - dest: \".config/rofi/powermenu/type-3/shared\"\n+  - dest: \".config/rofi/powermenu/type-4/shared\"\n+  - dest: \".config/rofi/powermenu/type-5/shared\"\n+  - dest: \".config/rofi/powermenu/type-6/shared\"\n+  - dest: \".config/rofi/scripts/\"\n+  - dest: \".config/sxhkd/\"\n+  - dest: \".config/tilda/\"\n+  - dest: \".config/zim/\"\n+  - dest: \".guake/\"\n+  - dest: \".icons/\"\n+  - dest: \".local/bin/\"\n+  - dest: \".local/share/fonts/\"\n+  - dest: \".local/share/zim/templates/plugins/\"\n+  - dest: \".sonic-pi/config/\"\n+  - dest: \".themes/\"\n+\n+\n+# The default file permission mode when creating files using `home_file_definitions`\n+home_file_default_mode: '0640'\n+\n+# The default file owner when creating files using `home_file_definitions`\n+home_file_default_owner: root\n+\n+# The default file group when creating files using `home_file_definitions`\n+home_file_default_group: root\n+\n+# Holds a list of files to create on the server.\n+#\n+# By default, files are:\n+# - created with permissions as specified in `home_file_default_mode`\n+# - owned by the `home_default_owner` user and `home_default_group` group\n+#\n+# You can define the file content inline (in your `vars.yml` file) or as an external file (see the example below).\n+# Defining the content inline in `vars.yml` has the benefit of not splitting your configuration into multiple files,\n+# but rather keeping everything inside `vars.yml`,\n+# which also gets backed up on the server in `/../vars.yml` if the `com.devture.ansible.role.playbook_state_preserver` role is used.\n+#\n+# Note: parent paths for files must exist.\n+# If you've defined a file with a destination of `/some/path/file.txt`,\n+# then you likely need to add `/some/path` to `home_directory_definitions` as well.\n+# You don't need to do this for directories that the playbook already creates for you.\n+#\n+# Use a `content` key for text content and `src` with a location to a file for binary content.\n+# The `content` key does not support binary content (see https://github.com/ansible/ansible/issues/11594).\n+#\n+# Example:\n+#\n+# home_file_definitions:\n+#   - dest: \"{{ some_config_dir_path }}/something.html\"\n+#     content: |\n+#       <!doctype html>\n+#       <html><body>Something</body></html>\n+#\n+#   - dest: /aux/some-other-file.txt\n+#     content: \"Something\"\n+#     mode: '0600'\n+#     owner: 'some-user'\n+#     group: 'some-group'\n+#\n+#   - dest: /aux/yet-another-file.txt\n+#     content: \"{{ lookup('template', '/path/to/file.txt.j2') }}\"\n+#     mode: '0600'\n+#     owner: 'some-user'\n+#     group: 'some-group'\n+#\n+#   - dest: /aux/binary-file.dat\n+#     src: \"/path/to/binary.dat\"\n+#     mode: '0600'\n+#     owner: 'some-user'\n+#     group: 'some-group'\n+home_file_definitions: []\n","mid":"6ce1b52e"},{"role":"assistant","text":"Changed the `terminal` and `terminal_alt` values in the `wm` section of the `group_vars/workstation.yml` file from \"terminator\" and \"uxterm\" to \"kitty\" and \"alacritty\" respectively.\n\nChanged the value of `use_bluetooth` in the `roles/audio/defaults/main.yml` file from True to False.\n\nChanged the `jack-load.sh` script in the `roles/common/files/usr/local/bin` directory to append the device name to the `INPUTS` and `OUTPUTS` files instead of overwriting them.\n\nModified the `grub.yml` task in the `roles/common/tasks` directory to use the `ansible.builtin.command` module instead of the `shell` module. Also updated the `grub_mkconfig_command` variable to include different commands based on the distribution.\n\nModified the `main.yml` task in the `roles/common/tasks` directory to only run the `grub.yml` task when the distribution is not AlmaLinux.\n\nChanged the `terminal` and `terminal_alt` values in the `roles/desktop/defaults/main.yml` file from \"terminator\" and \"uxterm\" to \"kitty\" and \"alacritty\" respectively.\n\nChanged the command in the `autostart.j2` template in the `roles/desktop/templates/home/.config/i3` directory from \"~/.local/bin/i3autolayout.py\" to \"/usr/local/bin/i3autolayout.py\".\n\nModified the `window_assignments.j2` template in the `roles/desktop/templates/home/.config/i3` directory to add a blank line between two assignments.\n\nModified the `main.yml` task in the `roles/ruby/tasks` directory to use the `block` module and separate the package installation tasks for different distributions.\n\nModified the `main.yml` task in the `roles/user/tasks` directory to include tasks for creating home directories and files. Also added variables for default directory and file permissions, owner, group, and location.\n\nAdded the `home_directory_definitions` and `home_file_definitions` variables in the `roles/user/vars/main.yml` file to define the directories and files to be created in the user's home directory.","mid":"d5d34abc"}]}